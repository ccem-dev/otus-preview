!function(){"use strict";angular.module("otus.component.allPurpose",[])}(),function(){"use strict";angular.module("otus.component.editor",[])}(),function(){"use strict";angular.module("otus.component.preview",[])}(),function(){"use strict";angular.module("otus.preview",["ngMaterial","ui.router","angular-bind-html-compile","otusjs","otus.component.allPurpose","otus.component.editor","otus.component.preview"])}(),function(){"use strict";function stateConfiguration($stateProvider,$urlRouterProvider,$locationProvider){$stateProvider.state("index",{url:"/index",templateUrl:"app/view/sheet-view-template.html",resolve:{resolvedSurveyTemplate:function(FakeDataService,$q){var deferred=$q.defer();return FakeDataService.getSurveyTemplate().then(function(data){deferred.resolve(data)}),deferred.promise}},controller:"SheetViewController as sheetViewCtrl"}),$urlRouterProvider.otherwise("/index"),$locationProvider.html5Mode(!0)}angular.module("otus.preview").config(stateConfiguration),stateConfiguration.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}(),function(){function themeConfiguration($mdThemingProvider,$mdIconProvider){$mdThemingProvider.theme("layoutTheme").primaryPalette("blue",{default:"A200","hue-1":"200","hue-2":"50","hue-3":"700"}).accentPalette("blue-grey",{default:"900","hue-1":"50"}).warnPalette("red"),$mdIconProvider.defaultIconSet("app/assets/icons/mdi.svg",24)}angular.module("otus.preview").config(["$mdThemingProvider","$mdIconProvider",themeConfiguration])}(),function(){"use strict";function FakeDataService($http,$q){function getSurveyTemplate(){var defer=$q.defer();return $http.get("app/fake-data/survey-template.json").success(function(data){defer.resolve(data)}).error(function(error){console.log("Cannot GET a fake survey template.")}),defer.promise}var self=this;self.getSurveyTemplate=getSurveyTemplate}angular.module("otus.preview").service("FakeDataService",FakeDataService),FakeDataService.$inject=["$http","$q"]}(),function(){"use strict";function SheetViewController(resolvedSurveyTemplate){var self=this;self.surveyTemplate=resolvedSurveyTemplate}angular.module("otus.preview").controller("SheetViewController",SheetViewController),SheetViewController.$inject=["resolvedSurveyTemplate"]}(),function(){"use strict";function OtusPreviewController(){var self=this;self.itemContainer=[],self.$onInit=function(){self.itemContainer=self.surveyTemplate.itemContainer}}angular.module("otus.component.preview").component("otusPreview",{template:'<survey-item item-data="item" ng-repeat="item in ::$ctrl.itemContainer track by $index"></survey-item>',controller:OtusPreviewController,bindings:{surveyTemplate:"<"}})}(),function(){"use strict";function HtmlBuilderService(){function generateTagName(stringToFormat){var chars=stringToFormat.split(""),tagName="";return chars.forEach(function(character,index){var lowerChar="";character===character.toUpperCase()?(lowerChar=character.toLowerCase(),0!==index&&(lowerChar="-"+lowerChar)):lowerChar=character,tagName+=lowerChar}),tagName}var self=this;self.generateTagName=generateTagName}angular.module("otus.component.preview").service("HtmlBuilderService",HtmlBuilderService)}(),function(){"use strict";function TagComponentBuilderService(HtmlBuilderService){function createTagElement(elementType){return _replace(HtmlBuilderService.generateTagName(elementType))}function _replace(tagName){return"<otus-"+tagName+' item-data="$ctrl.itemData" on-update="$ctrl.update(valueType, value)" />'}var self=this;self.createTagElement=createTagElement}angular.module("otus.component.preview").service("TagComponentBuilderService",TagComponentBuilderService),TagComponentBuilderService.$inject=["HtmlBuilderService"]}(),function(){"use strict";function AnchorController($element,PageAnchorService){var self=this;self.$onInit=function(){$element.attr("tabindex",-1),PageAnchorService.anchorRegistry($element)}}angular.module("otus.component.editor").component("otusPageAnchor",{templateUrl:"app/editor/ui/page-anchor-item/page-anchor-template.html",controller:AnchorController,bindings:{id:"<"}}),AnchorController.$inject=["$element","PageAnchorService"]}(),function(){function PageAnchorService(){function anchorRegistry(anchorElement){anchorList[anchorElement[0].id]=anchorElement}function sheetAutoFocus(sheet){var childrenNb=sheet.children().length;childrenNb>6?_focusOnBottom():_focusOnTop()}function _focusOnTop(){anchorList["top-anchor"].focus()}function _focusOnBottom(){anchorList["bottom-anchor"].focus()}var self=this,anchorList={};self.sheetAutoFocus=sheetAutoFocus,self.anchorRegistry=anchorRegistry}angular.module("otus.component.editor").service("PageAnchorService",PageAnchorService)}(),function(){"use strict";function OtusSheetController(){function onInit(){self.isLoading=!0,self.itemContainer=self.surveyTemplate.itemContainer}function onDestroy(){_clearWorspace()}function _clearWorspace(){WorkspaceService.closeWork(),$window.sessionStorage.removeItem("surveyTemplate_OID")}var self=this;self.$onInit=onInit,self.$onDestroy=onDestroy}angular.module("otus.component.allPurpose").component("otusSheet",{templateUrl:"app/components/all-purpose/sheet/sheet-template.html",controller:OtusSheetController,bindings:{surveyTemplate:"<"}})}(),function(){"use strict";function OtusSurveyHeaderController(){}angular.module("otus.component.allPurpose").component("otusSurveyHeader",{templateUrl:"app/components/all-purpose/survey-header/survey-header-template.html",controller:OtusSurveyHeaderController,bindings:{surveyIdentity:"<"}})}(),function(){"use strict";function SurveyItemWidgetFactory(CalendarQuestionWidgetFactory,IntegerQuestionWidgetFactory,DecimalQuestionWidgetFactory,SingleSelectionQuestionWidgetFactory,CheckboxQuestionWidgetFactory,TextQuestionWidgetFactory,TimeQuestionWidgetFactory,EmailQuestionWidgetFactory,PhoneQuestionWidgetFactory,TextItemWidgetFactory,ImageItemWidgetFactory){function create(scope,element,item){return widgetFactories[item.objectType].create(scope,element,item)}var self=this,widgetFactories={CalendarQuestion:CalendarQuestionWidgetFactory,IntegerQuestion:IntegerQuestionWidgetFactory,DecimalQuestion:DecimalQuestionWidgetFactory,SingleSelectionQuestion:SingleSelectionQuestionWidgetFactory,CheckboxQuestion:CheckboxQuestionWidgetFactory,TextQuestion:TextQuestionWidgetFactory,TimeQuestion:TimeQuestionWidgetFactory,EmailQuestion:EmailQuestionWidgetFactory,PhoneQuestion:PhoneQuestionWidgetFactory,TextItem:TextItemWidgetFactory,ImageItem:ImageItemWidgetFactory};return self.create=create,self}angular.module("otus.component.editor").factory("SurveyItemWidgetFactory",SurveyItemWidgetFactory),SurveyItemWidgetFactory.$inject=["CalendarQuestionWidgetFactory","IntegerQuestionWidgetFactory","DecimalQuestionWidgetFactory","SingleSelectionQuestionWidgetFactory","CheckboxQuestionWidgetFactory","TextQuestionWidgetFactory","TimeQuestionWidgetFactory","EmailQuestionWidgetFactory","PhoneQuestionWidgetFactory","TextItemWidgetFactory","ImageItemWidgetFactory"]}(),function(){"use strict";function OtusCommentController(){var self=this;self.update=function(){self.onUpdate({valueType:"comment",value:self.comment})}}angular.module("otus.component.preview").component("otusComment",{templateUrl:"app/components/preview/comment/comment-template.html",controller:OtusCommentController,bindings:{itemData:"<",onUpdate:"&"}})}(),function(){"use strict";function MetadataGroupController(){var self=this;self.update=function(){self.onUpdate({valueType:"metadata",value:self.metadata})}}angular.module("otus.component.preview").component("metadataGroup",{templateUrl:"app/components/preview/metadata/metadata-group-template.html",controller:MetadataGroupController,bindings:{itemData:"<",onUpdate:"&"}})}(),function(){"use strict";function OtusSurveyItemController(){function isQuestion(){return"ImageItem"!==self.itemData.objectType&&"TextItem"!==self.itemData.objectType}function isItem(){return"ImageItem"===self.itemData.objectType||"TextItem"===self.itemData.objectType}function restoreAll(){console.log(self.itemData)}function confirmAnswer(){console.log(filling)}function update(prop,value){filling[prop]=value}var self=this,filling={};self.isQuestion=isQuestion,self.isItem=isItem,self.restoreAll=restoreAll,self.confirmAnswer=confirmAnswer,self.update=update,self.$onInit=function(){}}angular.module("otus.component.preview").component("otusSurveyItem",{templateUrl:"app/components/preview/survey-item/survey-item-template.html",controller:OtusSurveyItemController,bindings:{itemData:"<"}})}(),function(){"use strict";function directive(OtusButtonWidgetFactory){var ddo={scope:{click:"="},templateUrl:"app/editor/ui/base/button/button.html",retrict:"E",link:function(scope,element,attrs){scope.widget=OtusButtonWidgetFactory.create(scope,attrs,scope.$parent.widget)}};return ddo}angular.module("otus.component.editor").directive("otusButton",directive),directive.$inject=["OtusButtonWidgetFactory"]}(),function(){"use strict";function OtusButtonWidgetFactory(){function create(templateData,templateConfig,parentWidget){return new OtusButtonWidget(templateData,templateConfig,parentWidget)}var self=this;return self.create=create,self}function OtusButtonWidget(templateData,templateConfig,parentWidget){var self=this,validTooltipDirections=["top","bottom","left","right"];self.className=self.constructor.name,self.css={},self.template={},self.event={},self.template.ariaLabel=templateConfig.ariaLabel||templateConfig.label,self.template.label=templateConfig.label,self.template.tooltip=templateConfig.tooltip||templateConfig.label,self.template.tooltipDirection=void 0!==templateConfig.tooltipDirection&&validTooltipDirections.indexOf(templateConfig.tooltipDirection)!==-1?templateConfig.tooltipDirection:"top",self.template.leftIcon=templateConfig.iconButton||templateConfig.leftIcon,self.template.rightIcon=templateConfig.rightIcon,self.template.hasLeftIcon=void 0!==self.template.leftIcon,self.template.hasRightIcon=void 0===templateConfig.iconButton&&void 0!==self.template.rightIcon,self.css.iconButton=void 0!==templateConfig.iconButton?"md-icon-button":"",self.parent=parentWidget,self.event.click=templateData.click}angular.module("otus.component.editor").factory("OtusButtonWidgetFactory",OtusButtonWidgetFactory)}(),function(){"use strict";function otusInputText(OtusInputTextWidgetFactory){var ddo={scope:{model:"=",disabled:"@"},templateUrl:"app/editor/ui/base/input-text/input-text.html",retrict:"E",link:function(scope,element,attrs){scope.widget=OtusInputTextWidgetFactory.create(scope,attrs,element,scope.$parent.widget||scope.$parent.$parent.childWidget)}};return ddo}angular.module("otus.component.editor").directive("otusInputText",otusInputText),otusInputText.$inject=["OtusInputTextWidgetFactory"]}(),function(){"use strict";function OtusInputTextWidgetFactory(){function create(templateData,templateConfig,element,parentWidget){return new OtusInputTextWidget(templateData,templateConfig,element,parentWidget)}var self=this;return self.create=create,self}function OtusInputTextWidget(templateData,templateConfig,element,parentWidget){var self=this;self.className=self.constructor.name,self.css={},self.template={},self.event={},self.template.ariaLabel=templateConfig.ariaLabel||templateConfig.label,self.template.label=templateConfig.label,self.template.leftIcon=templateConfig.iconButton||templateConfig.leftIcon,self.template.rightIcon=templateConfig.rightIcon,self.template.hasLeftIcon=void 0!==self.template.leftIcon,self.template.hasRightIcon=void 0===templateConfig.iconButton&&void 0!==self.template.rightIcon,self.parent=parentWidget,self.modelReference=templateData.model,self.style=templateData.style,templateData.model instanceof Function?self.model=templateData.model():self.model=templateData.model,element.on("change",function(){self.modelReference instanceof Function?self.modelReference(self.model):self.modelReference=self.model})}angular.module("otus.component.editor").factory("OtusInputTextWidgetFactory",OtusInputTextWidgetFactory)}(),function(){"use strict";function LabelController($element){function _fillLabel(){$element[0].innerHTML=_getLabel()}function _getLabel(){return self.itemLabel instanceof Object?self.itemLabel.ptBR.formattedText:self.itemLabel}var self=this;self.$onInit=function(){_fillLabel()}}angular.module("otus.component.preview").component("otusLabel",{controller:LabelController,bindings:{itemLabel:"<"}}),LabelController.$inject=["$element"]}(),function(){"use strict";function directive(OtusTextEditorWidgetFactory){var ddo={scope:{placeholder:"@",label:"=",ariaLabel:"@",leftIcon:"@",ngModel:"="},templateUrl:"app/editor/ui/base/text-editor/text-editor.html",retrict:"E",link:function(scope,element){scope.widget=OtusTextEditorWidgetFactory.create(scope,element)}};return ddo}angular.module("otus.component.editor").directive("otusTextEditor",directive),directive.$inject=["OtusTextEditorWidgetFactory"]}(),function(){"use strict";function OtusTextEditorWidgetFactory(UpdateQuestionEventFactory){function create(scope,element){return new OtusTextEditorWidget(scope,element,UpdateQuestionEventFactory)}var self=this;return self.create=create,self}function OtusTextEditorWidget(scope,element,UpdateQuestionEventFactory){function _init(){self.ngModel&&_loadLabel()}function getClassName(){return"OtusTextEditorWidget"}function getUUID(){return scope.uuid}function getLabel(){return self.ngModel.ptBR.formattedText}function getElement(){return element}function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function _saveLabel(){self.ngModel.ptBR.formattedText=_removeSpecialCharacters(event.target.innerHTML),self.ngModel.ptBR.plainText=event.target.innerText}function _removeSpecialCharacters(value){return value.replace(/"/g,"'")}function _loadLabel(){self.getElement().children()[0].innerHTML=self.getLabel()}var self=this;self.input=angular.element(element.children()[0]),self.ngModel=scope.ngModel,self.placeholder=scope.placeholder,self.getClassName=getClassName,self.getUUID=getUUID,self.getElement=getElement,self.getParent=getParent,self.getItem=getItem,self.getLabel=getLabel,_init(),element.on("focusout",function(event){_saveLabel(),UpdateQuestionEventFactory.create().execute(self)})}angular.module("otus.component.editor").factory("OtusTextEditorWidgetFactory",OtusTextEditorWidgetFactory),OtusTextEditorWidgetFactory.$inject=["UpdateQuestionEventFactory"]}(),function(){"use strict";function otusMetadataGroup(MetadataGroupWidgetFactory){var ddo={scope:{},restrict:"E",templateUrl:"app/editor/ui/metadata/group/metadata-group.html",link:function(scope,element){scope.widget=MetadataGroupWidgetFactory.create(scope,element)}};return ddo}angular.module("otus.component.editor").directive("otusMetadataGroup",otusMetadataGroup),otusMetadataGroup.$inject=["MetadataGroupWidgetFactory"]}(),function(){"use strict";function MetadataGroupWidgetFactory(MetadataOptionWidgetFactory,AddMetadataAnswerEventFactory,RemoveMetadataOptionEventFactory){function create(scope,element){return new MetadataGroupWidget(scope,element,MetadataOptionWidgetFactory,AddMetadataAnswerEventFactory,RemoveMetadataOptionEventFactory)}var self=this;return self.create=create,self}function MetadataGroupWidget(scope,element,MetadataOptionWidgetFactory,AddMetadataAnswerEventFactory,RemoveMetadataOptionEventFactory){function _init(){self.getItem().metadata.options.length>0&&_loadOptions()}function getClassName(){return"MetadataGroupWidget"}function getUUID(){return scope.uuid}function getElement(){return element}function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function _loadOptions(){self.getItem().metadata.options.forEach(function(option){var optionWidget=MetadataOptionWidgetFactory.create(option,self);self.options.push(optionWidget)})}function addOption(){var newOption=AddMetadataAnswerEventFactory.create().execute(self),optionWidget=MetadataOptionWidgetFactory.create(newOption,self);self.options.push(optionWidget)}function removeLastOption(){RemoveMetadataOptionEventFactory.create().execute(self),self.options.splice(-1)}var self=this;self.ngModel=scope.ngModel,self.options=[],self.getClassName=getClassName,self.getUUID=getUUID,self.getElement=getElement,self.getParent=getParent,self.getItem=getItem,self.addOption=addOption,self.removeLastOption=removeLastOption,_init()}angular.module("otus.component.editor").factory("MetadataGroupWidgetFactory",MetadataGroupWidgetFactory),MetadataGroupWidgetFactory.$inject=["MetadataOptionWidgetFactory","AddMetadataAnswerEventFactory","RemoveMetadataOptionEventFactory"]}(),function(){"use strict";function MetadataOptionWidgetFactory(){function create(option,parentGroup){return new MetadataAnswerOptionWidget(option,parentGroup)}var self=this;return self.create=create,self}function MetadataAnswerOptionWidget(option,parentGroup){var self=this;self.name="MetadataAnswerOption",self.parentGroup=parentGroup,self.option=option}angular.module("otus.component.editor").factory("MetadataOptionWidgetFactory",MetadataOptionWidgetFactory)}(),function(){"use strict";function directive(SurveyItemWidgetFactory,SheetContentService){var ddo={scope:{},templateUrl:"app/editor/ui/survey-item/misc/misc.html",retrict:"E",link:function(scope,element){scope.widget=SurveyItemWidgetFactory.create(scope,element,SheetContentService.lastLoadedQuestion)}};return ddo}angular.module("otus.component.editor").directive("otusMiscItem",directive),directive.$inject=["SurveyItemWidgetFactory","SheetContentService"]}(),function(){"use strict";function directive(SurveyItemWidgetFactory,SheetContentService){var ddo={scope:{},templateUrl:"app/editor/ui/survey-item/question/question.html",retrict:"E",link:function(scope,element){scope.widget=SurveyItemWidgetFactory.create(scope,element,SheetContentService.lastLoadedQuestion)}};return ddo}angular.module("otus.component.editor").directive("otusQuestionItem",directive),directive.$inject=["SurveyItemWidgetFactory","SheetContentService"]}(),function(){"use strict";function OtusMiscItemController(){function isImageItem(){return"ImageItem"===self.itemData.objectType}function isTextItem(){return"TextItem"===self.itemData.objectType}var self=this;self.isImageItem=isImageItem,self.isTextItem=isTextItem,self.$onInit=function(){}}angular.module("otus.component.preview").component("otusMiscItem",{templateUrl:"app/components/preview/survey-item/misc/misc-item-template.html",controller:OtusMiscItemController,bindings:{itemData:"<"}})}(),function(){"use strict";function OtusQuestionController(TagComponentBuilderService){var self=this;self.$onInit=function(){self.template=TagComponentBuilderService.createTagElement(self.itemData.objectType)},self.update=function(prop,value){self.onUpdate({valueType:prop,value:value})}}angular.module("otus.component.preview").component("otusQuestion",{templateUrl:"app/components/preview/survey-item/question/question-component-template.html",controller:OtusQuestionController,bindings:{itemData:"<",onUpdate:"&"},require:{otusSurveyItem:"^otusSurveyItem"}}),OtusQuestionController.$inject=["TagComponentBuilderService"]}(),function(){"use strict";function imageItem(ImageItemWidgetFactory){var ddo={scope:{},templateUrl:"app/editor/ui/survey-item/misc/image/image-item.html",retrict:"E",link:function(scope,element){scope.widget=scope.$parent.widget}};return ddo}angular.module("otus.component.editor").directive("imageItem",imageItem)}(),function(){"use strict";function ImageItemWidgetFactory(){function create(scope){return new ImageItemWidget(scope)}var self=this;return self.create=create,self}function ImageItemWidget(scope){function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function getTemplate(){return"<image-item></image-item>"}var self=this;self.name="ImageItem",self.getParent=getParent,self.item=getItem(),self.getTemplate=getTemplate}angular.module("otus.component.editor").factory("ImageItemWidgetFactory",ImageItemWidgetFactory)}(),function(){"use strict";function directive(){var ddo={scope:{},templateUrl:"app/editor/ui/survey-item/question/calendar/calendar-question.html",retrict:"E"};return ddo}angular.module("otus.component.editor").directive("otusCalendarQuestion",directive)}(),function(){"use strict";function CalendarQuestionWidgetFactory(){function create(scope,element){return new CalendarQuestionWidget(scope,element)}var self=this;return self.create=create,self}function CalendarQuestionWidget(scope,element){function getClassName(){return"CalendarQuestionWidget"}function getUUID(){return scope.uuid}function getElement(){return element}function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function getTemplate(){return"<otus-calendar-question></otus-calendar-question>"}var self=this;self.getClassName=getClassName,self.getUUID=getUUID,self.getElement=getElement,self.getParent=getParent,self.getItem=getItem,self.getTemplate=getTemplate}angular.module("otus.component.editor").factory("CalendarQuestionWidgetFactory",CalendarQuestionWidgetFactory)}(),function(){"use strict";function textItem(TextItemWidgetFactory){var ddo={scope:{},templateUrl:"app/editor/ui/survey-item/misc/text/text-item.html",retrict:"E",link:function(scope,element){scope.widget=scope.$parent.widget}};return ddo}angular.module("otus.component.editor").directive("textItem",textItem),textItem.$inject=["TextItemWidgetFactory"]}(),function(){"use strict";function TextItemWidgetFactory(){function create(scope){return new TextItemWidget(scope)}var self=this;return self.create=create,self}function TextItemWidget(scope){function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function getTemplate(){return"<text-item></text-item>"}var self=this;self.name="TextItem",self.getParent=getParent,self.item=getItem(),self.getTemplate=getTemplate}angular.module("otus.component.editor").factory("TextItemWidgetFactory",TextItemWidgetFactory)}(),function(){"use strict";function otusCheckboxQuestion(CheckboxQuestionWidgetFactory){var ddo={scope:{},restrict:"E",templateUrl:"app/editor/ui/survey-item/question/checkbox/checkbox-question.html",link:function(scope,element){scope.widget=CheckboxQuestionWidgetFactory.create(scope,element)}};return ddo}angular.module("otus.component.editor").directive("otusCheckboxQuestion",otusCheckboxQuestion),otusCheckboxQuestion.$inject=["CheckboxQuestionWidgetFactory"]}(),function(){"use strict";function CheckboxQuestionWidgetFactory(AnswerOptionWidgetFactory,AddAnswerOptionEventFactory,RemoveAnswerOptionEventFactory){function create(scope,element){return new CheckboxQuestionWidget(scope,element,AnswerOptionWidgetFactory,AddAnswerOptionEventFactory,RemoveAnswerOptionEventFactory)}var self=this;return self.create=create,self}function CheckboxQuestionWidget(scope,element,AnswerOptionWidgetFactory,AddAnswerOptionEventFactory,RemoveAnswerOptionEventFactory){function _init(){self.getItem().options.length>0&&_loadAnswerOptions()}function getClassName(){return"CheckboxQuestionWidget"}function getUUID(){return scope.uuid}function getElement(){return element}function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function getTemplate(){return"<otus-checkbox-question></otus-checkbox-question>"}function addOption(){var newOption=AddAnswerOptionEventFactory.create().execute(self),optionWidget=AnswerOptionWidgetFactory.create(newOption,self);self.options.push(optionWidget)}function _loadAnswerOptions(){self.getItem().options.forEach(function(awswerOption){var optionWidget=AnswerOptionWidgetFactory.create(awswerOption,self);self.options.push(optionWidget)})}function removeLastOption(){RemoveAnswerOptionEventFactory.create().execute(self),self.options.splice(-1)}var self=this;self.options=[],self.getClassName=getClassName,self.getUUID=getUUID,self.getElement=getElement,self.getParent=getParent,self.getItem=getItem,self.getTemplate=getTemplate,self.addOption=addOption,self.removeLastOption=removeLastOption,_init()}angular.module("otus.component.editor").factory("CheckboxQuestionWidgetFactory",CheckboxQuestionWidgetFactory),CheckboxQuestionWidgetFactory.$inject=["AnswerOptionWidgetFactory","AddAnswerOptionEventFactory","RemoveAnswerOptionEventFactory"]}(),function(){"use strict";function directive(DecimalQuestionWidgetFactory){var ddo={scope:{ngModel:"=",ariaLabel:"@"},templateUrl:"app/editor/ui/survey-item/question/decimal/decimal-question.html",restrict:"E",link:function(scope,element){scope.widget=DecimalQuestionWidgetFactory.create(scope,element)}};return ddo}angular.module("otus.component.editor").directive("otusDecimalQuestion",directive),directive.$inject=["DecimalQuestionWidgetFactory"]}(),function(){"use strict";function DecimalQuestionWidgetFactory(){function create(scope,element){return new DecimalQuestionWidget(scope,element)}var self=this;return self.create=create,self}function DecimalQuestionWidget(scope,element){function getClassName(){return"DecimalQuestionWidget"}function getUUID(){return scope.uuid}function getElement(){return element}function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function getTemplate(){return"<otus-decimal-question></otus-decimal-question>"}var self=this;self.getClassName=getClassName,self.getUUID=getUUID,self.getElement=getElement,self.getParent=getParent,self.getItem=getItem,self.getTemplate=getTemplate}angular.module("otus.component.editor").factory("DecimalQuestionWidgetFactory",DecimalQuestionWidgetFactory)}(),function(){"use strict";angular.module("otus.component.editor").directive("uiDecimal",function(){return{link:function($scope,element,attrs,ngModelCtrl){function shouldPrintChar(event){var keycode=(angular.element(event.currentTarget),event.which);return isNumberKey(keycode)||isValidKey(keycode)}function formatedInteger(event){var element=angular.element(event.currentTarget),keycode=event.which,currentValue=element.val();0===currentValue.length?lastValidValue="":isNumberKey(keycode)||isValidKey(keycode)?lastValidValue=element.val():isValidKey(keycode)||element.val(lastValidValue)}function isNumberKey(keycode){return keycode>=48&&keycode<=57||keycode>=96&&keycode<=105}function isValidKey(keycode){var minusKey=109===keycode,commaKey=188===keycode,dotKey=190===keycode,shiftKey=16===keycode,backspaceKey=8===keycode,homeKey=36===keycode,endKey=35===keycode,deleteKey=46===keycode,controlKey=17===keycode,leftKey=37===keycode,rightKey=39===keycode;return minusKey||commaKey||dotKey||shiftKey||backspaceKey||homeKey||endKey||deleteKey||controlKey||leftKey||rightKey}var lastValidValue;element.on("keydown",shouldPrintChar),element.on("keyup",formatedInteger)}}})}(),function(){"use strict";function directive(){var ddo={scope:{},templateUrl:"app/editor/ui/survey-item/question/email/email-question.html",retrict:"E"};return ddo}angular.module("otus.component.editor").directive("otusEmailQuestion",directive)}(),function(){"use strict";function EmailQuestionWidgetFactory(){function create(scope,element){return new EmailQuestionWidget(scope,element)}var self=this;return self.create=create,self}function EmailQuestionWidget(scope,element){function getClassName(){return"EmailQuestionWidget"}function getUUID(){return scope.uuid}function getElement(){return element}function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function getTemplate(){return"<otus-email-question></otus-email-question>"}var self=this;self.getClassName=getClassName,self.getUUID=getUUID,self.getElement=getElement,self.getParent=getParent,self.getItem=getItem,self.getTemplate=getTemplate}angular.module("otus.component.editor").factory("EmailQuestionWidgetFactory",EmailQuestionWidgetFactory)}(),function(){"use strict";function directive(IntegerQuestionWidgetFactory){var ddo={scope:{ngModel:"=",ariaLabel:"@"},templateUrl:"app/editor/ui/survey-item/question/integer/integer-question.html",restrict:"E",link:function(scope,element){scope.widget=IntegerQuestionWidgetFactory.create(scope,element)}};return ddo}angular.module("otus.component.editor").directive("otusIntegerQuestion",directive),directive.$inject=["IntegerQuestionWidgetFactory"]}(),function(){"use strict";function IntegerQuestionWidgetFactory(){function create(scope,element){return new IntegerQuestionWidget(scope,element)}var self=this;return self.create=create,self}function IntegerQuestionWidget(scope,element){function getClassName(){return"IntegerQuestionWidget"}function getUUID(){return scope.uuid}function getElement(){return element}function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function getTemplate(){return"<otus-integer-question></otus-integer-question>"}var self=this;self.getClassName=getClassName,self.getUUID=getUUID,self.getElement=getElement,self.getParent=getParent,self.getItem=getItem,self.getTemplate=getTemplate}angular.module("otus.component.editor").factory("IntegerQuestionWidgetFactory",IntegerQuestionWidgetFactory)}(),function(){"use strict";angular.module("otus.component.editor").directive("uiInteger",function(){return{link:function($scope,element,attrs,ngModelCtrl){function shouldPrintChar(event){var keycode=(angular.element(event.currentTarget),event.which);return isNumberKey(keycode)||isValidKey(keycode)}function formatedInteger(event){var element=angular.element(event.currentTarget),keycode=event.which,currentValue=element.val();0===currentValue.length?lastValidValue="":isNumberKey(keycode)||isValidKey(keycode)?lastValidValue=element.val():isValidKey(keycode)||element.val(lastValidValue)}function isNumberKey(keycode){return keycode>=48&&keycode<=57||keycode>=96&&keycode<=105}function isValidKey(keycode){var minusKey=109===keycode,shiftKey=16===keycode,backspaceKey=8===keycode,homeKey=36===keycode,endKey=35===keycode,deleteKey=46===keycode,controlKey=17===keycode,leftKey=37===keycode,rightKey=39===keycode;return minusKey||shiftKey||backspaceKey||homeKey||endKey||deleteKey||controlKey||leftKey||rightKey}var lastValidValue;element.on("keydown",shouldPrintChar),element.on("keyup",formatedInteger)}}})}(),function(){"use strict";function directive(){var ddo={scope:{ngModel:"=",ariaLabel:"@"},templateUrl:"app/editor/ui/survey-item/question/phone/phone-question.html",retrict:"E"};return ddo}angular.module("otus.component.editor").directive("otusPhoneQuestion",directive)}(),function(){"use strict";function PhoneQuestionWidgetFactory(){function create(scope,element){return new PhoneQuestionWidget(scope,element)}var self=this;return self.create=create,self}function PhoneQuestionWidget(scope,element){function getClassName(){return"PhoneQuestionWidget"}function getUUID(){return scope.uuid}function getElement(){return element}function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function getTemplate(){return"<otus-phone-question></otus-phone-question>"}var self=this;self.getClassName=getClassName,self.getUUID=getUUID,self.getElement=getElement,self.getParent=getParent,self.getItem=getItem,self.getTemplate=getTemplate}angular.module("otus.component.editor").factory("PhoneQuestionWidgetFactory",PhoneQuestionWidgetFactory)}(),function(){"use strict";function directive(){var ddo={scope:{},templateUrl:"app/editor/ui/survey-item/question/text/text-question.html",retrict:"E"};return ddo}angular.module("otus.component.editor").directive("otusTextQuestion",directive)}(),function(){"use strict";function TextQuestionWidgetFactory(){function create(scope,element){return new TextQuestionWidget(scope,element)}var self=this;return self.create=create,self}function TextQuestionWidget(scope,element){function getClassName(){return"TextQuestionWidget"}function getUUID(){return scope.uuid}function getElement(){return element}function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function getTemplate(){return"<otus-text-question></otus-text-question>"}var self=this;self.getClassName=getClassName,
self.getUUID=getUUID,self.getElement=getElement,self.getParent=getParent,self.getItem=getItem,self.getTemplate=getTemplate}angular.module("otus.component.editor").factory("TextQuestionWidgetFactory",TextQuestionWidgetFactory)}(),function(){"use strict";function directive(){var ddo={scope:{},templateUrl:"app/editor/ui/survey-item/question/time/time-question.html",retrict:"E"};return ddo}angular.module("otus.component.editor").directive("otusTimeQuestion",directive)}(),function(){"use strict";function TimeQuestionWidgetFactory(){function create(scope,element){return new TimeQuestionWidget(scope,element)}var self=this;return self.create=create,self}function TimeQuestionWidget(scope,element){function getClassName(){return"TimeQuestionWidget"}function getUUID(){return scope.uuid}function getElement(){return element}function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function getTemplate(){return"<otus-time-question></otus-time-question>"}var self=this;self.getClassName=getClassName,self.getUUID=getUUID,self.getElement=getElement,self.getParent=getParent,self.getItem=getItem,self.getTemplate=getTemplate}angular.module("otus.component.editor").factory("TimeQuestionWidgetFactory",TimeQuestionWidgetFactory)}(),function(){"use strict";function ImageItemController(){var self=this;self.$onInit=function(){}}angular.module("otus.component.preview").component("otusImageItem",{templateUrl:"app/components/preview/survey-item/misc/image/image-item-template.html",controller:ImageItemController,bindings:{itemData:"<"}})}(),function(){"use strict";function TextItemController(){var self=this;self.$onInit=function(){}}angular.module("otus.component.preview").component("otusTextItem",{templateUrl:"app/components/preview/survey-item/misc/text/text-item-template.html",controller:TextItemController,bindings:{itemData:"<"}})}(),function(){"use strict";function OtusCalendarQuestionController(){var self=this;self.update=function(){self.onUpdate({valueType:"answer",value:self.answer})}}angular.module("otus.component.preview").component("otusCalendarQuestion",{templateUrl:"app/components/preview/survey-item/question/calendar/calendar-question-template.html",controller:OtusCalendarQuestionController,bindings:{itemData:"<",onUpdate:"&"}})}(),function(){"use strict";function CheckboxQuestionController(){function _buildAnswerObject(index,value){return{valueType:"answer",value:{option:index,state:value}}}var self=this;self.$onInit=function(){self.answerArray=[],self.itemData.options.forEach(function(option){self.answerArray.push(_buildAnswerObject(option.value,!1))})},self.update=function(){self.onUpdate({value:self.answerArray})}}angular.module("otus.component.preview").component("otusCheckboxQuestion",{templateUrl:"app/components/preview/survey-item/question/checkbox/checkbox-question-template.html",controller:CheckboxQuestionController,bindings:{itemData:"<",onUpdate:"&"}})}(),function(){"use strict";function DecimalQuestionController(){var self=this;self.update=function(){self.onUpdate({valueType:"answer",value:self.answer})}}angular.module("otus.component.preview").component("otusDecimalQuestion",{templateUrl:"app/components/preview/survey-item/question/decimal/decimal-question-template.html",controller:DecimalQuestionController,bindings:{itemData:"<",onUpdate:"&"}})}(),function(){"use strict";function EmailQuestionController($element){var self=this;self.update=function(){self.onUpdate({valueType:"answer",value:self.answer})},self.ariaLabel=function(){return self.itemData.label.ptBR.plainText}}angular.module("otus.component.preview").component("otusEmailQuestion",{templateUrl:"app/components/preview/survey-item/question/email/email-question-template.html",controller:EmailQuestionController,bindings:{itemData:"<",onUpdate:"&"}}),EmailQuestionController.$inject=["$element"]}(),function(){"use strict";function IntegerQuestionController(){var self=this;self.update=function(){self.onUpdate({valueType:"answer",value:self.answer})}}angular.module("otus.component.preview").component("otusIntegerQuestion",{templateUrl:"app/components/preview/survey-item/question/integer/integer-question-template.html",controller:IntegerQuestionController,bindings:{itemData:"<",onUpdate:"&"}})}(),function(){"use strict";angular.module('otus.component.preview').directive("uiInteger",function(){return{link:function($scope,element,attrs,ngModelCtrl){function shouldPrintChar(event){var keycode=(angular.element(event.currentTarget),event.which);return isNumberKey(keycode)||isValidKey(keycode)}function formatedInteger(event){var element=angular.element(event.currentTarget),keycode=event.which,currentValue=element.val();0===currentValue.length?lastValidValue="":isNumberKey(keycode)||isValidKey(keycode)?lastValidValue=element.val():isValidKey(keycode)||element.val(lastValidValue)}function isNumberKey(keycode){return keycode>=48&&keycode<=57||keycode>=96&&keycode<=105}function isValidKey(keycode){var minusKey=109===keycode,shiftKey=16===keycode,backspaceKey=8===keycode,homeKey=36===keycode,endKey=35===keycode,deleteKey=46===keycode,controlKey=17===keycode,leftKey=37===keycode,rightKey=39===keycode;return minusKey||shiftKey||backspaceKey||homeKey||endKey||deleteKey||controlKey||leftKey||rightKey}var lastValidValue;element.on("keydown",shouldPrintChar),element.on("keyup",formatedInteger)}}})}(),function(){"use strict";function PhoneQuestionController(){var self=this;self.update=function(){self.onUpdate({valueType:"answer",value:self.answer})}}angular.module("otus.component.preview").component("otusPhoneQuestion",{templateUrl:"app/components/preview/survey-item/question/phone/phone-question-template.html",controller:PhoneQuestionController,bindings:{itemData:"<",onUpdate:"&"}})}(),function(){"use strict";function SingleSelectionQuestionController(){var self=this;self.update=function(){self.onUpdate({valueType:"answer",value:self.answer})}}angular.module("otus.component.preview").component("otusSingleSelectionQuestion",{templateUrl:"app/components/preview/survey-item/question/single-selection/single-selection-question-template.html",controller:SingleSelectionQuestionController,bindings:{itemData:"<",onUpdate:"&"}})}(),function(){"use strict";function TextQuestionController(){var self=this;self.update=function(){self.onUpdate({valueType:"answer",value:self.answer})}}angular.module("otus.component.preview").component("otusTextQuestion",{templateUrl:"app/components/preview/survey-item/question/text/text-question-template.html",controller:TextQuestionController,bindings:{itemData:"<",onUpdate:"&"}})}(),function(){"use strict";function TimeQuestionController(){var self=this;self.update=function(){self.onUpdate({valueType:"answer",value:self.answer})}}angular.module("otus.component.preview").component("otusTimeQuestion",{templateUrl:"app/components/preview/survey-item/question/time/time-question-template.html",controller:TimeQuestionController,bindings:{itemData:"<",onUpdate:"&"}})}(),function(){"use strict";function directive(SingleSelectionQuestionWidgetFactory){var ddo={scope:{},restrict:"E",templateUrl:"app/editor/ui/survey-item/question/single-selection/group/single-selection-question.html",link:function(scope){scope.widget=scope.$parent.widget}};return ddo}angular.module("otus.component.editor").directive("otusSingleSelectionQuestion",directive),directive.$inject=["SingleSelectionQuestionWidgetFactory"]}(),function(){"use strict";function SingleSelectionQuestionWidgetFactory(AnswerOptionWidgetFactory,AddAnswerOptionEventFactory,RemoveAnswerOptionEventFactory){function create(scope,element){return new SingleSelectionQuestionWidget(scope,element,AnswerOptionWidgetFactory,AddAnswerOptionEventFactory,RemoveAnswerOptionEventFactory)}var self=this;return self.create=create,self}function SingleSelectionQuestionWidget(scope,element,AnswerOptionWidgetFactory,AddAnswerOptionEventFactory,RemoveAnswerOptionEventFactory){function _init(){self.getItem().options.length>0&&_loadAnswerOptions()}function getClassName(){return"SingleSelectionQuestionWidget"}function getUUID(){return scope.uuid}function getElement(){return element}function getParent(){return scope.$parent.widget}function getItem(){return getParent().getItem()}function getTemplate(){return"<otus-single-selection-question></otus-single-selection-question>"}function addOption(){var newOption=AddAnswerOptionEventFactory.create().execute(self),optionWidget=AnswerOptionWidgetFactory.create(newOption,self);self.options.push(optionWidget)}function _loadAnswerOptions(){self.getItem().options.forEach(function(awswerOption){var optionWidget=AnswerOptionWidgetFactory.create(awswerOption,self);self.options.push(optionWidget)})}function removeLastOption(){RemoveAnswerOptionEventFactory.create().execute(self),self.options.splice(-1)}var self=this;self.options=[],self.getClassName=getClassName,self.getUUID=getUUID,self.getElement=getElement,self.getParent=getParent,self.getItem=getItem,self.getTemplate=getTemplate,self.addOption=addOption,self.removeLastOption=removeLastOption,_init()}angular.module("otus.component.editor").factory("SingleSelectionQuestionWidgetFactory",SingleSelectionQuestionWidgetFactory),SingleSelectionQuestionWidgetFactory.$inject=["AnswerOptionWidgetFactory","AddAnswerOptionEventFactory","RemoveAnswerOptionEventFactory"]}(),function(){"use strict";function AnswerOptionWidgetFactory(){function create(option,parentGroup){return new AnswerOptionWidget(option,parentGroup)}var self=this;return self.create=create,self}function AnswerOptionWidget(option,parentGroup){var self=this;self.name="AnswerOption",self.parentGroup=parentGroup,self.option=option}angular.module("otus.component.editor").factory("AnswerOptionWidgetFactory",AnswerOptionWidgetFactory)}();